<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/best-practices/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Best Practices Summary | Apache Cloudberry (Incubating)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://cloudberry.apache.org/zh/docs/next/tutorials/best-practices/"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Best Practices Summary | Apache Cloudberry (Incubating)"><meta data-rh="true" name="description" content="A summary of best practices for Apache Cloudberry."><meta data-rh="true" property="og:description" content="A summary of best practices for Apache Cloudberry."><link data-rh="true" rel="icon" href="/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cloudberry.apache.org/zh/docs/next/tutorials/best-practices/"><link data-rh="true" rel="alternate" href="https://cloudberry.apache.org/docs/next/tutorials/best-practices/" hreflang="en"><link data-rh="true" rel="alternate" href="https://cloudberry.apache.org/zh/docs/next/tutorials/best-practices/" hreflang="zh"><link data-rh="true" rel="alternate" href="https://cloudberry.apache.org/docs/next/tutorials/best-practices/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="Apache Cloudberry (Incubating) is one advanced and mature open-source MPP (Massively Parallel Processing) databases available. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="Apache Cloudberry (Incubating) is one advanced and mature open-source MPP (Massively Parallel Processing) databases available. Atom Feed">
<link rel="alternate" type="application/json" href="/zh/blog/feed.json" title="Apache Cloudberry (Incubating) is one advanced and mature open-source MPP (Massively Parallel Processing) databases available. JSON Feed">




<link rel="preconnect" href="https://analytics.apache.org/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://analytics.apache.org/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","66"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"matomo.js",p.parentNode.insertBefore(t,p)}()</script><link rel="stylesheet" href="/zh/assets/css/styles.9629f118.css">
<script src="/zh/assets/js/runtime~main.8c0c5dee.js" defer="defer"></script>
<script src="/zh/assets/js/main.7afb81f6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><div class="tipsWrap_WWTe"><div class="tipsContent_sMsy"><div class="text_VINd"><a href="https://github.com/apache/cloudberry" target="_blank" rel="noopener noreferrer"><span>If you like Apache Cloudberry (Incubating), give it a star on GitHub! </span><img src="/img/home/hcard/star.svg" alt=""></a></div><div class="close_vVex"><img src="/img/home/hcard/close.svg" alt=""></div></div></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div class="nav-left-logo"><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/apache_cloudberry_color_black.svg" alt="Apache Cloudberry (Incubating)" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh/img/apache_cloudberry_color_white.svg" alt="Apache Cloudberry (Incubating)" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" versions="current,2.x,1.x" href="/zh/docs/next/">下一版</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/docs/next/tutorials/best-practices/">下一版</a></li><li><a class="dropdown__link" href="/zh/docs/tutorials/best-practices/">2.x</a></li><li><a class="dropdown__link" href="/zh/docs/1.x/">1.x</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/docs/next/">Docs</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/community">Overview</a></li><li><a class="dropdown__link" href="/zh/community/slack">Slack Guide</a></li><li><a class="dropdown__link" href="/zh/community/wechat">WeChat Guide</a></li><li><a class="dropdown__link" href="/zh/community/events">Community Events</a></li><li><a class="dropdown__link" href="/zh/community/mailing-lists">Mailing Lists</a></li><li><a class="dropdown__link" href="/zh/community/brand">Brand Guidelines</a></li><li><a class="dropdown__link" href="/zh/community/security">Security Policy</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/contribute">Overview</a></li><li><a class="dropdown__link" href="/zh/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/zh/contribute/git">Working with Git &amp; GitHub</a></li><li><a class="dropdown__link" href="/zh/contribute/code">Code Contribution Guide</a></li><li><a class="dropdown__link" href="/zh/contribute/proposal">Proposal Guide</a></li><li><a class="dropdown__link" href="/zh/contribute/doc">Doc Contribution Guide</a></li></ul></div><a class="navbar__item navbar__link" href="/zh/blog">Blog</a><a class="navbar__item navbar__link" href="/zh/releases">Download</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Team</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/team">Who we are</a></li><li><a class="dropdown__link" href="/zh/team/new-committers">Inviting New Committers</a></li><li><a class="dropdown__link" href="/zh/team/sign-icla">Sign ICLA</a></li><li><a class="dropdown__link" href="/zh/team/setup-apache-email-account">Setup the Apache account</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Resources</a><ul class="dropdown__menu"><li><a href="https://github.com/apache/cloudberry/wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Wiki</a></li><li><a href="https://github.com/apache/cloudberry/discussions/868" target="_blank" rel="noopener noreferrer" class="dropdown__link">Roadmap</a></li><li><a href="https://github.com/apache/cloudberry/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum</a></li><li><a class="dropdown__link" href="/zh/support">Support</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li><li><a href="https://www.apache.org/foundation/policies/conduct" target="_blank" rel="noopener noreferrer" class="dropdown__link">Code of Conduct</a></li></ul></div><div class="toggle_vylO colorModeToggle_x44X check-theme-switch"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为暗黑模式）" aria-label="切换浅色/暗黑模式（当前为暗黑模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_dCNk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_BF9v"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_Rg9N"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/next/">产品介绍</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/next/deployment/">部署和构建</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/docs/next/data-loading/">加载数据</a><button aria-label="展开侧边栏分类 &#x27;加载数据&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/next/operate-with-data/operate-with-db-objects/create-and-manage-database">创建和准备数据库</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/next/operate-with-data/operate-with-db-objects/create-and-manage-tablespaces">操作数据</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/next/performance/define-database-performance">优化性能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/docs/next/security/">设置安全和权限</a><button aria-label="展开侧边栏分类 &#x27;设置安全和权限&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/next/sys-admin/backup-and-restore/">管理数据库集群</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/next/developer/develop-extensions-using-rust">开发者指南</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/next/ecosystem/sql-clients/dbeaver">生态系统</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/next/sql-stmts/">参考指南</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh/docs/next/tutorials/crash-course">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/crash-course">Apache Cloudberry Crash Course</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/docs/next/tutorials/quick-trial-lessons/">Quick Trial Lessons</a><button aria-label="展开侧边栏分类 &#x27;Quick Trial Lessons&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh/docs/next/tutorials/product-principles/about-mvcc">Product Principles</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/zh/docs/next/tutorials/best-practices/">Best Practices</a><button aria-label="折叠侧边栏分类 &#x27;Best Practices&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/best-practices/schema-design-best-practices">Schema Design Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/best-practices/load-data-best-practices">Load Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/best-practices/db-encryption-best-practices">Encrypt Data and Database Connections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/best-practices/high-availability-best-practices">High Availability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/best-practices/resource-group-best-practices">Memory and Resource Management with Resource Groups</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/best-practices/system-configuration-best-practices">System Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/best-practices/system-monitor-and-maintain-best-practices">System Monitoring and Maintenance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/best-practices/manage-bloat">Manage Bloat in a Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/best-practices/identify-and-mitigate-heap-table-performance-issues">Identify and Mitigate Heap Table Performance Issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/tutorials/best-practices/security-best-practices">Security</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_hjYf"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->Apache Cloudberry (Incubating)<!-- --> <b>下一版</b> 版尚未发行的文档。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/zh/docs/tutorials/best-practices/">最新版本</a></b> (<!-- -->2.x<!-- -->)。</div></div><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link" id="支付">Tutorials</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Best Practices</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：下一版</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_bxCs"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Best Practices Summary</h1>
<p>A summary of best practices for Apache Cloudberry.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-model">Data model<a href="#data-model" class="hash-link" aria-label="Data model的直接链接" title="Data model的直接链接">​</a></h2>
<p>Apache Cloudberry is an analytical MPP shared-nothing database. This model is significantly different from a highly normalized/transactional SMP database. Because of this, the following best practices are recommended.</p>
<ul>
<li>Apache Cloudberry performs best with a denormalized schema design suited for MPP analytical processing for example, Star or Snowflake schema, with large fact tables and smaller dimension tables.</li>
<li>Use the same data types for columns used in joins between tables.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/schema-design-best-practices">Schema Design</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="heap-vs-append-optimized-storage">Heap vs. append-optimized storage<a href="#heap-vs-append-optimized-storage" class="hash-link" aria-label="Heap vs. append-optimized storage的直接链接" title="Heap vs. append-optimized storage的直接链接">​</a></h2>
<ul>
<li>Use heap storage for tables and partitions that will receive iterative batch and singleton <code>UPDATE</code>, <code>DELETE</code>, and <code>INSERT</code> operations.</li>
<li>Use heap storage for tables and partitions that will receive concurrent <code>UPDATE</code>, <code>DELETE</code>, and <code>INSERT</code> operations.</li>
<li>Use append-optimized storage for tables and partitions that are updated infrequently after the initial load and have subsequent inserts only performed in large batch operations.</li>
<li>Avoid performing singleton <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code> operations on append-optimized tables.</li>
<li>Avoid performing concurrent batch <code>UPDATE</code> or <code>DELETE</code> operations on append-optimized tables. Concurrent batch <code>INSERT</code> operations are acceptable.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/schema-design-best-practices#heap-storage-or-append-optimized-storage">Heap Storage or Append-Optimized Storage</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="row-vs-column-oriented-storage">Row vs. column oriented storage<a href="#row-vs-column-oriented-storage" class="hash-link" aria-label="Row vs. column oriented storage的直接链接" title="Row vs. column oriented storage的直接链接">​</a></h2>
<ul>
<li>Use row-oriented storage for workloads with iterative transactions where updates are required and frequent inserts are performed.</li>
<li>Use row-oriented storage when selects against the table are wide.</li>
<li>Use row-oriented storage for general purpose or mixed workloads.</li>
<li>Use column-oriented storage where selects are narrow and aggregations of data are computed over a small number of columns.</li>
<li>Use column-oriented storage for tables that have single columns that are regularly updated without modifying other columns in the row.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/schema-design-best-practices#row-or-column-orientation">Row or Column Orientation</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="compression">Compression<a href="#compression" class="hash-link" aria-label="Compression的直接链接" title="Compression的直接链接">​</a></h2>
<ul>
<li>Use compression on large append-optimized and partitioned tables to improve I/O across the system.</li>
<li>Set the column compression settings at the level where the data resides.</li>
<li>Balance higher levels of compression with the time and CPU cycles needed to compress and uncompress data.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/schema-design-best-practices">Compression</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="distributions">Distributions<a href="#distributions" class="hash-link" aria-label="Distributions的直接链接" title="Distributions的直接链接">​</a></h2>
<ul>
<li>Explicitly define a column or random distribution for all tables. Do not use the default.</li>
<li>Use a single column that will distribute data across all segments evenly.</li>
<li>Do not distribute on columns that will be used in the <code>WHERE</code> clause of a query.</li>
<li>Do not distribute on dates or timestamps.</li>
<li>Never distribute and partition tables on the same column.</li>
<li>Achieve local joins to significantly improve performance by distributing on the same column for large tables commonly joined together.</li>
<li>To ensure there is no data skew, validate that data is evenly distributed after the initial load and after incremental loads.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/schema-design-best-practices">Distributions</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resource-queue-memory-management">Resource queue memory management<a href="#resource-queue-memory-management" class="hash-link" aria-label="Resource queue memory management的直接链接" title="Resource queue memory management的直接链接">​</a></h2>
<ul>
<li>
<p>Set <code>vm.overcommit_memory</code> to 2.</p>
</li>
<li>
<p>Do not configure the OS to use huge pages.</p>
</li>
<li>
<p>Use <code>gp_vmem_protect_limit</code> to set the maximum memory that the instance can allocate for <em>all</em> work being done in each segment database.</p>
</li>
<li>
<p>You can use <code>gp_vmem_protect_limit</code> by calculating:</p>
<ul>
<li>
<p><code>gp_vmem</code> – the total memory available to Apache Cloudberry</p>
<ul>
<li>
<p>If the total system memory is less than 256 GB, use this formula:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">gp_vmem = ((SWAP + RAM) – (7.5GB + 0.05 * RAM)) / 1.7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>If the total system memory is equal to or greater than 256 GB, use this formula:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">gp_vmem = ((SWAP + RAM) – (7.5GB + 0.05 * RAM)) / 1.17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>where <code>SWAP</code> is the host&#x27;s swap space in GB, and <code>RAM</code> is the host&#x27;s RAM in GB.</p>
</li>
<li>
<p><code>max_acting_primary_segments</code> – the maximum number of primary segments that could be running on a host when mirror segments are activated due to a host or segment failure.</p>
</li>
<li>
<p><code>gp_vmem_protect_limit</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">gp_vmem_protect_limit = gp_vmem / acting_primary_segments</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Convert to MB to set the value of the configuration parameter.</p>
</li>
</ul>
</li>
<li>
<p>In a scenario where a large number of workfiles are generated calculate the <code>gp_vmem</code> factor with this formula to account for the workfiles.</p>
<ul>
<li>
<p>If the total system memory is less than 256 GB:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">gp_vmem = ((SWAP + RAM) – (7.5GB + 0.05 * RAM - (300KB *</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      total_#_workfiles))) / 1.7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>If the total system memory is equal to or greater than 256 GB:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">gp_vmem = ((SWAP + RAM) – (7.5GB + 0.05 * RAM - (300KB *</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      total_#_workfiles))) / 1.17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p>Never set <code>gp_vmem_protect_limit</code> too high or larger than the physical RAM on the system.</p>
</li>
<li>
<p>Use the calculated <code>gp_vmem</code> value to calculate the setting for the <code>vm.overcommit_ratio</code> operating system parameter:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">vm.overcommit_ratio = (RAM - 0.026 * gp_vmem) / RAM</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Use <code>statement_mem</code> to allocate memory used for a query per segment db.</p>
</li>
<li>
<p>Use resource queues to set both the numbers of active queries (<code>ACTIVE_STATEMENTS</code>) and the amount of memory (<code>MEMORY_LIMIT</code>) that can be utilized by queries in the queue.</p>
</li>
<li>
<p>Associate all users with a resource queue. Do not use the default queue.</p>
</li>
<li>
<p>Set <code>PRIORITY</code> to match the real needs of the queue for the workload and time of day. Avoid using MAX priority.</p>
</li>
<li>
<p>Ensure that resource queue memory allocations do not exceed the setting for <code>gp_vmem_protect_limit</code>.</p>
</li>
<li>
<p>Dynamically update resource queue settings to match daily operations flow.</p>
</li>
</ul>
<p>See <a href="/zh/docs/next/deployment/system-settings">Setting the Cloudberry Recommended OS Parameters</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="partitioning">Partitioning<a href="#partitioning" class="hash-link" aria-label="Partitioning的直接链接" title="Partitioning的直接链接">​</a></h2>
<ul>
<li>Partition large tables only. Do not partition small tables.</li>
<li>Use partitioning only if partition elimination (partition pruning) can be achieved based on the query criteria.</li>
<li>Choose range partitioning over list partitioning.</li>
<li>Partition the table based on a commonly-used column, such as a date column.</li>
<li>Never partition and distribute tables on the same column.</li>
<li>Do not use default partitions.</li>
<li>Do not use multi-level partitioning; create fewer partitions with more data in each partition.</li>
<li>Validate that queries are selectively scanning partitioned tables (partitions are being eliminated) by examining the query <code>EXPLAIN</code> plan.</li>
<li>Do not create too many partitions with column-oriented storage because of the total number of physical files on every segment: <code>physical files = segments x columns x partitions</code></li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/schema-design-best-practices">Schema Design</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="indexes">Indexes<a href="#indexes" class="hash-link" aria-label="Indexes的直接链接" title="Indexes的直接链接">​</a></h2>
<ul>
<li>In general indexes are not needed in Apache Cloudberry.</li>
<li>Create an index on a single column of a columnar table for drill-through purposes for high cardinality tables that require queries with high selectivity.</li>
<li>Do not index columns that are frequently updated.</li>
<li>Consider dropping indexes before loading data into a table. After the load, re-create the indexes for the table.</li>
<li>Create selective B-tree indexes.</li>
<li>Do not create bitmap indexes on columns that are updated.</li>
<li>Avoid using bitmap indexes for unique columns, very high or very low cardinality data. Bitmap indexes perform best when the column has a low cardinality—100 to 100,000 distinct values.</li>
<li>Do not use bitmap indexes for transactional workloads.</li>
<li>In general do not index partitioned tables. If indexes are needed, the index columns must be different than the partition columns.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-and-maintenance">Monitoring and maintenance<a href="#monitoring-and-maintenance" class="hash-link" aria-label="Monitoring and maintenance的直 接链接" title="Monitoring and maintenance的直接链接">​</a></h2>
<ul>
<li>Implement the &quot;Recommended Monitoring and Maintenance Tasks&quot;.</li>
<li>Run <code>gpcheckperf</code> at install time and periodically thereafter, saving the output to compare system performance over time.</li>
<li>Use all the tools at your disposal to understand how your system behaves under different loads.</li>
<li>Examine any unusual event to determine the cause.</li>
<li>Monitor query activity on the system by running explain plans periodically to ensure the queries are running optimally.</li>
<li>Review plans to determine whether index are being used and partition elimination is occurring as expected.</li>
<li>Know the location and content of system log files and monitor them on a regular basis, not just when problems arise.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/system-monitor-and-maintain-best-practices">System Monitoring and Maintenance</a>, <a href="/zh/docs/next/performance/optimize-queries/analyze-query-performance.md">Query Profiling</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="analyze">ANALYZE<a href="#analyze" class="hash-link" aria-label="ANALYZE的直接链接" title="ANALYZE的直接链接">​</a></h2>
<ul>
<li>Determine if analyzing the database is actually needed. Analyzing is not needed if <code>gp_autostats_mode</code> is set to <code>on_no_stats</code> (the default) and the table is not partitioned.</li>
<li>Use <code>analyzedb</code> in preference to <code>ANALYZE</code> when dealing with large sets of tables, as it does not require analyzing the entire database. The <code>analyzedb</code> utility updates statistics data for the specified tables incrementally and concurrently. For append optimized tables, <code>analyzedb</code> updates statistics incrementally only if the statistics are not current. For heap tables, statistics are always updated. <code>ANALYZE</code> does not update the table metadata that the <code>analyzedb</code> utility uses to determine whether table statistics are up to date.</li>
<li>Selectively run <code>ANALYZE</code> at the table level when needed.</li>
<li>Always run <code>ANALYZE</code> after <code>INSERT</code>, <code>UPDATE</code>. and <code>DELETE</code> operations that significantly changes the underlying data.</li>
<li>Always run <code>ANALYZE</code> after <code>CREATE INDEX</code> operations.</li>
<li>If <code>ANALYZE</code> on very large tables takes too long, run <code>ANALYZE</code> only on the columns used in a join condition, <code>WHERE</code> clause, <code>SORT</code>, <code>GROUP BY</code>, or <code>HAVING</code> clause.</li>
<li>When dealing with large sets of tables, use <code>analyzedb</code> instead of <code>ANALYZE.</code></li>
<li>Run <code>analyzedb</code> on the root partition any time that you add a new partition(s) to a partitioned table. This operation both analyzes the leaf partitions in parallel and merges any updated statistics into the root partition.</li>
</ul>
<p>See <a href="/zh/docs/next/performance/update-stats-using-analyze.md">Updating Statistics with ANALYZE</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vacuum">Vacuum<a href="#vacuum" class="hash-link" aria-label="Vacuum的直接链接" title="Vacuum的直接链接">​</a></h2>
<ul>
<li>Run <code>VACUUM</code> after large <code>UPDATE</code> and <code>DELETE</code> operations.</li>
<li>Do not run <code>VACUUM FULL</code>. Instead run a <code>CREATE TABLE...AS</code> operation, then rename and drop the original table.</li>
<li>Frequently run <code>VACUUM</code> on the system catalogs to avoid catalog bloat and the need to run <code>VACUUM FULL</code> on catalog tables.</li>
<li>Never issue a <code>kill</code> command against <code>VACUUM</code> on catalog tables.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/manage-bloat">Managing Bloat in a Database</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="loading">Loading<a href="#loading" class="hash-link" aria-label="Loading的直接链接" title="Loading的直 接链接">​</a></h2>
<ul>
<li>Maximize the parallelism as the number of segments increase.</li>
<li>Spread the data evenly across as many ETL nodes as possible.<!-- -->
<ul>
<li>Split very large data files into equal parts and spread the data across as many file systems as possible.</li>
<li>Run two <code>gpfdist</code> instances per file system.</li>
<li>Run <code>gpfdist</code> on as many interfaces as possible.</li>
<li>Use <code>gp_external_max_segs</code> to control the number of segments that will request data from the <code>gpfdist</code> process.</li>
<li>Always keep <code>gp_external_max_segs</code> and the number of <code>gpfdist</code> processes an even factor.</li>
</ul>
</li>
<li>Always drop indexes before loading into existing tables and re-create the index after loading.</li>
<li>Run <code>VACUUM</code> after load errors to recover space.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/load-data-best-practices">Loading Data</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="security">Security<a href="#security" class="hash-link" aria-label="Security的直接链接" title="Security的直接链接">​</a></h2>
<ul>
<li>Secure the <code>gpadmin</code> user id and only allow essential system administrators access to it.</li>
<li>Administrators should only log in to Cloudberry as <code>gpadmin</code> when performing certain system maintenance tasks (such as upgrade or expansion).</li>
<li>Limit users who have the <code>SUPERUSER</code> role attribute. Roles that are superusers bypass all access privilege checks in Apache Cloudberry, as well as resource queuing. Only system administrators should be given superuser rights.</li>
<li>Database users should never log on as <code>gpadmin</code>, and ETL or production workloads should never run as <code>gpadmin</code>.</li>
<li>Assign a distinct Apache Cloudberry role to each user, application, or service that logs in.</li>
<li>For applications or web services, consider creating a distinct role for each application or service.</li>
<li>Use groups to manage access privileges.</li>
<li>Protect the root password.</li>
<li>Enforce a strong password password policy for operating system passwords.</li>
<li>Ensure that important operating system files are protected.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/security-best-practices">Security</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="encryption">Encryption<a href="#encryption" class="hash-link" aria-label="Encryption的直接链接" title="Encryption的直接链接">​</a></h2>
<ul>
<li>Encrypting and decrypting data has a performance cost; only encrypt data that requires encryption.</li>
<li>Do performance testing before implementing any encryption solution in a production system.</li>
<li>Server certificates in a production Apache Cloudberry system should be signed by a certificate authority (CA) so that clients can authenticate the server. The CA may be local if all clients are local to the organization.</li>
<li>Client connections to Apache Cloudberry should use SSL encryption whenever the connection goes through an insecure link.</li>
<li>A symmetric encryption scheme, where the same key is used to both encrypt and decrypt, has better performance than an asymmetric scheme and should be used when the key can be shared safely.</li>
<li>Use cryptographic functions to encrypt data on disk. The data is encrypted and decrypted in the database process, so it is important to secure the client connection with SSL to avoid transmitting unencrypted data.</li>
<li>Use the gpfdists protocol to secure ETL data as it is loaded into or unloaded from the database.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/db-encryption-best-practices">Encrypting Data and Database Connections</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-availability">High availability<a href="#high-availability" class="hash-link" aria-label="High availability的直接链接" title="High availability的直接链接">​</a></h2>
<blockquote>
<p><strong>Note</strong> The following guidelines apply to actual hardware deployments, but not to public cloud-based infrastructure, where high availability solutions may already exist.</p>
</blockquote>
<ul>
<li>Use a hardware RAID storage solution with 8 to 24 disks.</li>
<li>Use RAID 1, 5, or 6 so that the disk array can tolerate a failed disk.</li>
<li>Configure a hot spare in the disk array to allow rebuild to begin automatically when disk failure is detected.</li>
<li>Protect against failure of the entire disk array and degradation during rebuilds by mirroring the RAID volume.</li>
<li>Monitor disk utilization regularly and add additional space when needed.</li>
<li>Monitor segment skew to ensure that data is distributed evenly and storage is consumed evenly at all segments.</li>
<li>Set up a standby coordinator instance to take over if the primary coordinator fails.</li>
<li>Plan how to switch clients to the new coordinator instance when a failure occurs, for example, by updating the coordinator address in DNS.</li>
<li>Set up monitoring to send notifications in a system monitoring application or by email when the primary fails.</li>
<li>Set up mirrors for all segments.</li>
<li>Locate primary segments and their mirrors on different hosts to protect against host failure.</li>
<li>Recover failed segments promptly, using the <code>gprecoverseg</code> utility, to restore redundancy and return the system to optimal balance.</li>
<li>Consider a Dual Cluster configuration to provide an additional level of redundancy and additional query processing throughput.</li>
<li>Backup Apache Cloudberry databases regularly unless the data is easily restored from sources.</li>
<li>If backups are saved to local cluster storage, move the files to a safe, off-cluster location when the backup is complete.</li>
<li>If backups are saved to NFS mounts, use a scale-out NFS solution such as Dell EMC Isilon to prevent IO bottlenecks.</li>
<li>Consider using Cloudberry integration to stream backups to the Dell EMC Data Domain enterprise backup platform.</li>
</ul>
<p>See <a href="/zh/docs/next/tutorials/best-practices/high-availability-best-practices">High Availability</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/cloudberry-site/edit/main/docs/tutorials/best-practices/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_VsjB"><span class="theme-last-updated">最后<!-- -->由 <b>Dianjin Wang</b> <!-- -->于 <b><time datetime="2025-09-01T02:33:53.000Z">2025年9月1日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/docs/next/tutorials/product-principles/about-utilities"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label single-line-overflow hide-before-after">About Management and Monitoring Utilities</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/docs/next/tutorials/best-practices/schema-design-best-practices"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label single-line-overflow hide-before-after">Schema Design Best Practices</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#data-model" class="table-of-contents__link toc-highlight">Data model</a></li><li><a href="#heap-vs-append-optimized-storage" class="table-of-contents__link toc-highlight">Heap vs. append-optimized storage</a></li><li><a href="#row-vs-column-oriented-storage" class="table-of-contents__link toc-highlight">Row vs. column oriented storage</a></li><li><a href="#compression" class="table-of-contents__link toc-highlight">Compression</a></li><li><a href="#distributions" class="table-of-contents__link toc-highlight">Distributions</a></li><li><a href="#resource-queue-memory-management" class="table-of-contents__link toc-highlight">Resource queue memory management</a></li><li><a href="#partitioning" class="table-of-contents__link toc-highlight">Partitioning</a></li><li><a href="#indexes" class="table-of-contents__link toc-highlight">Indexes</a></li><li><a href="#monitoring-and-maintenance" class="table-of-contents__link toc-highlight">Monitoring and maintenance</a></li><li><a href="#analyze" class="table-of-contents__link toc-highlight">ANALYZE</a></li><li><a href="#vacuum" class="table-of-contents__link toc-highlight">Vacuum</a></li><li><a href="#loading" class="table-of-contents__link toc-highlight">Loading</a></li><li><a href="#security" class="table-of-contents__link toc-highlight">Security</a></li><li><a href="#encryption" class="table-of-contents__link toc-highlight">Encryption</a></li><li><a href="#high-availability" class="table-of-contents__link toc-highlight">High availability</a></li></ul></div></div></div></div></main></div></div></div><div class="wrap_QlFE"><div class="mainWrap_IbWk"><div class="linksWrap_Zcc4"><div><div class="footerLinkTitle_PxTg">Support</div><div class="footerLinkItem_Kf4k"><a href="https://github.com/apache/cloudberry/issues" target="_blank" rel="noopener noreferrer">GitHub Issues</a></div><div class="footerLinkItem_Kf4k"><a href="https://github.com/apache/cloudberry/discussions" target="_blank" rel="noopener noreferrer">GitHub Discussions</a></div><div class="footerLinkItem_Kf4k"><a href="https://inviter.co/apache-cloudberry" target="_blank" rel="noopener noreferrer">Slack</a></div><div class="footerLinkItem_Kf4k"><a href="https://x.com/ASFCloudberry" target="_blank" rel="noopener noreferrer">Twitter</a></div><div class="footerLinkItem_Kf4k"><a href="https://youtube.com/@ApacheCloudberry" target="_blank" rel="noopener noreferrer">Youtube</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/zh/community/security">Security</a></div></div><div><div class="footerLinkTitle_PxTg">Resources</div><div class="footerLinkItem_Kf4k"><a href="/zh/releases" target="_blank">Download</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/zh/docs/">Documentation</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/zh/community/events">Events</a></div><div class="footerLinkItem_Kf4k"><a href="/zh/community/brand" target="_blank">Brand Guidelines</a></div></div><div><div class="footerLinkTitle_PxTg">Contribution</div><div class="footerLinkItem_Kf4k"><a target="_self" href="/zh/contribute/git">Working with Git &amp; GitHub</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/zh/contribute/how-to-contribute">Contribution Overview</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/zh/contribute/code">Code Contribution</a></div><div class="footerLinkItem_Kf4k"><a target="_self" href="/zh/contribute/doc">Doc Contribution</a></div></div></div><div class="logoLinkWrap_MDp5"><div class="logoWrap_qcVI"><img class="logo_cphB" src="/zh/img/apache-incubator.svg" alt=""></div><div class="links_yA93"><svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M15.002 0c-8.288 0-15 6.713-15 15 0 6.637 4.293 12.244 10.256 14.231.75.131 1.031-.319 1.031-.712 0-.356-.019-1.538-.019-2.794-3.769.694-4.744-.919-5.044-1.763-.168-.43-.9-1.762-1.537-2.118-.525-.282-1.275-.975-.019-.994 1.181-.019 2.025 1.087 2.306 1.537 1.35 2.27 3.507 1.632 4.37 1.238.13-.975.524-1.631.956-2.006-3.338-.375-6.826-1.669-6.826-7.406 0-1.632.582-2.982 1.538-4.032-.15-.375-.675-1.912.15-3.975 0 0 1.256-.394 4.125 1.538 1.2-.338 2.475-.506 3.75-.506s2.55.168 3.75.506c2.869-1.95 4.125-1.538 4.125-1.538.825 2.063.3 3.6.15 3.975.956 1.05 1.538 2.382 1.538 4.032 0 5.756-3.507 7.03-6.844 7.406.544.468 1.012 1.369 1.012 2.775 0 2.006-.018 3.619-.018 4.125 0 .394.28.862 1.03.712A15.024 15.024 0 0 0 30.003 15c0-8.287-6.713-15-15-15Z"></path></svg><svg width="32" height="26" viewBox="0 0 32 26" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M31.319 3.484c-1.145.507-2.36.84-3.603.987a6.293 6.293 0 0 0 2.758-3.47 12.518 12.518 0 0 1-3.983 1.52A6.274 6.274 0 0 0 15.64 6.815c0 .493.056.97.161 1.43a17.811 17.811 0 0 1-12.93-6.555 6.252 6.252 0 0 0-.85 3.154 6.272 6.272 0 0 0 2.791 5.222 6.253 6.253 0 0 1-2.841-.785l-.001.077a6.277 6.277 0 0 0 5.033 6.153 6.305 6.305 0 0 1-2.834.108 6.278 6.278 0 0 0 5.86 4.356 12.59 12.59 0 0 1-7.79 2.686c-.5 0-1-.03-1.497-.088a17.746 17.746 0 0 0 9.616 2.818c11.54 0 17.849-9.559 17.849-17.848 0-.272-.007-.544-.019-.812a12.746 12.746 0 0 0 3.13-3.246Z"></path></svg><svg width="30" height="24" viewBox="0 0 30 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M15.366 0c.801.004 2.805.024 4.935.11l.755.032c2.145.102 4.287.275 5.35.571 1.417.398 2.53 1.56 2.907 3.033.6 2.339.675 6.903.684 8.008l.002.229v.032l-.002.229c-.009 1.104-.084 5.669-.684 8.008-.381 1.478-1.495 2.64-2.907 3.032-1.063.297-3.205.47-5.35.571l-.755.033c-2.13.086-4.134.105-4.935.11h-.734c-1.696-.01-8.785-.087-11.04-.714-1.418-.398-2.532-1.56-2.908-3.032-.6-2.34-.675-6.904-.684-8.008v-.49c.01-1.105.084-5.67.684-8.008.382-1.478 1.496-2.64 2.908-3.033C5.847.086 12.936.01 14.632 0h.734Zm-3.367 6.749v10.5l9-5.25-9-5.25Z"></path></svg><svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M6.791 18.77a2.959 2.959 0 0 1-2.952 2.952 2.959 2.959 0 0 1-2.951-2.951 2.959 2.959 0 0 1 2.951-2.952h2.952v2.952Zm1.487 0a2.959 2.959 0 0 1 2.952-2.951 2.959 2.959 0 0 1 2.952 2.952v7.39a2.959 2.959 0 0 1-2.952 2.952 2.959 2.959 0 0 1-2.952-2.952v-7.39ZM11.23 6.792A2.959 2.959 0 0 1 8.278 3.84 2.959 2.959 0 0 1 11.23.888a2.959 2.959 0 0 1 2.952 2.951v2.952H11.23Zm0 1.487a2.959 2.959 0 0 1 2.952 2.952 2.959 2.959 0 0 1-2.952 2.952H3.84A2.959 2.959 0 0 1 .887 11.23a2.959 2.959 0 0 1 2.951-2.952h7.391Zm11.98 2.952a2.959 2.959 0 0 1 2.951-2.952 2.959 2.959 0 0 1 2.952 2.952 2.959 2.959 0 0 1-2.952 2.952H23.21V11.23Zm-1.488 0a2.959 2.959 0 0 1-2.951 2.952 2.959 2.959 0 0 1-2.952-2.952V3.84A2.959 2.959 0 0 1 18.771.887a2.959 2.959 0 0 1 2.951 2.951v7.391Zm-2.951 11.98a2.959 2.959 0 0 1 2.951 2.951 2.959 2.959 0 0 1-2.951 2.952 2.959 2.959 0 0 1-2.952-2.952V23.21h2.952Zm0-1.488a2.959 2.959 0 0 1-2.952-2.951 2.959 2.959 0 0 1 2.952-2.952h7.39a2.959 2.959 0 0 1 2.952 2.952 2.959 2.959 0 0 1-2.952 2.951h-7.39Z"></path></svg><svg width="28" height="30" viewBox="0 0 28 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M22.48 4.286H5.195c-.845 0-1.52.724-1.52 1.568v18.579c0 .844.675 1.568 1.52 1.568h17.283c.845 0 1.52-.724 1.52-1.568V5.854c0-.844-.675-1.568-1.52-1.568Z"></path><path d="M6.233 12.156h3.081v10.756H6.233V12.156Zm1.57-5.315c.988 0 1.802.875 1.802 1.938s-.814 1.939-1.803 1.939C6.814 10.718 6 9.842 6 8.779c0-1.063.814-1.938 1.802-1.938Zm3.488 5.315h2.965v1.439h.058c.407-.876 1.453-1.751 2.965-1.751 3.14 0 3.721 2.25 3.721 5.127v5.879h-3.081v-5.253c0-1.25 0-2.877-1.628-2.877s-1.86 1.376-1.86 2.752v5.315h-3.082v-10.63h-.058Z" fill="#000"></path></svg><svg width="34" height="28" viewBox="0 0 34 28" fill="none" xmlns="http://www.w3.org/2000/svg" class="item_KKoc" cursor="pointer"><path d="M26.863 16.567c.748 0 1.347-.636 1.347-1.347 0-.748-.599-1.347-1.347-1.347s-1.347.599-1.347 1.347.599 1.347 1.347 1.347Zm-6.639 0c.749 0 1.347-.636 1.347-1.347 0-.748-.598-1.347-1.347-1.347-.748 0-1.346.599-1.346 1.347s.598 1.347 1.346 1.347Zm9.852 7.56a.52.52 0 0 0-.258.553c0 .074 0 .148.036.221.148.627.442 1.622.442 1.66 0 .11.037.184.037.257a.33.33 0 0 1-.331.332c-.074 0-.11-.037-.184-.074l-2.174-1.253c-.147-.074-.331-.147-.516-.147-.11 0-.22 0-.294.037-1.032.294-2.1.442-3.242.442-5.49 0-9.91-3.687-9.91-8.258 0-4.57 4.42-8.257 9.91-8.257 5.489 0 9.91 3.686 9.91 8.257 0 2.47-1.327 4.719-3.427 6.23ZM24.01 8.147a13.662 13.662 0 0 0-.418-.007c-6.262 0-11.41 4.29-11.41 9.757 0 .83.119 1.634.342 2.4h-.133c-1.33 0-2.659-.221-3.877-.553-.111-.037-.222-.037-.333-.037-.221 0-.443.074-.627.185L4.932 21.4a.525.525 0 0 1-.221.074.409.409 0 0 1-.406-.405c0-.11.036-.184.073-.294.037-.037.37-1.251.554-1.987 0-.074.037-.184.037-.258a.834.834 0 0 0-.332-.662C2.089 16.065.5 13.378.5 10.398.501 4.916 5.855.5 12.428.5 18.073.5 22.82 3.753 24.01 8.146Zm-7.73.627c.859 0 1.54-.716 1.54-1.54 0-.858-.681-1.539-1.54-1.539-.86 0-1.54.68-1.54 1.54 0 .859.68 1.54 1.54 1.54Zm-7.89 0c.86 0 1.54-.716 1.54-1.54 0-.858-.68-1.539-1.54-1.539-.859 0-1.539.68-1.539 1.54 0 .859.68 1.54 1.54 1.54Z"></path></svg></div></div></div><div class="copyrightWrap_yPz7"><div class="copyright_AoBa">
      <p>
        Apache Cloudberry is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
      </p>
      <p>
        Copyright © 2025 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.</p>
      <p>
        Apache®, the names of Apache projects, and the feather logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.
      </p>
      </div></div></div></div>
</body>
</html>